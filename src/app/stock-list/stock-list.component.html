<div class="mat-h1">Add Stock</div>
<mat-form-field
  class="example-full-width"
  appearance="fill"
  style="width: 50%"
>
  <mat-label>Search Stock</mat-label>
  <input
    matInput
    aria-label="Search Stock"
    [matAutocomplete]="auto"
    [formControl]="searchCtrl"
  />
  <mat-autocomplete #auto="matAutocomplete">
    <mat-option
      *ngFor="let state of filteredStocks | async"
      [value]="state.symbol"
    >
      <!-- <img class="example-option-img" aria-hidden [src]="state.flag" height="25"> -->
      <span>{{ state.description }}</span> |
      <small>{{ state.displaySymbol }}</small>
    </mat-option>
  </mat-autocomplete>
</mat-form-field>
<div class="error" *ngIf="!((filteredStocks | async)?.length) && searchCtrl.dirty">
  Please enter a valid stock name
</div>
<button mat-raised-button color="primary" (click)="addStockToList()" style="display: block;">
  <mat-icon>add</mat-icon>
  Add stock
</button>
<div [ngStyle]="{'visibility': !chartData.length ? 'hidden' : 'unset'}">
  <mat-divider style="margin: 2rem 0 3rem 0"></mat-divider>
  <div class="mat-h1">List of Stocks</div>
  <mat-form-field appearance="standard">
    <mat-label>Filter</mat-label>
    <input
      matInput
      (keyup)="applyFilter($event)"
      placeholder="Ex. Mia"
      #input
    />
  </mat-form-field>

  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort>
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
        <td mat-cell *matCellDef="let row">{{ row.id }}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
        <td mat-cell *matCellDef="let row">{{ row.description }}</td>
      </ng-container>

      <ng-container matColumnDef="symbol">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Symbol</th>
        <td mat-cell *matCellDef="let row">
          {{ row?.symbol }}
        </td>
      </ng-container>
      <!-- Fruit Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef>Price</th>
        <td mat-cell *matCellDef="let row">
          {{ row?.currentPrice?.c | currency }}
        </td>
      </ng-container>
      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef>Delete</th>
        <td mat-cell *matCellDef="let row; let i = index">
          <mat-icon (click)="removeItemsFromList(row, i)">delete</mat-icon>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">
          No data matching the filter "{{ input.value }}"
        </td>
      </tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[5, 10, 25, 100]"
      aria-label="Select page of users"
    ></mat-paginator>
  </div>
  <mat-divider style="margin: 3rem 0"></mat-divider>
  <div class="mat-h1" style="margin-top: 2rem">Chart View</div>
  <div style="display: flex; justify-content: center" *ngIf="chartData.length">
    <ngx-charts-line-chart
      style="margin: 2rem"
      [view]="view"
      [scheme]="colorScheme"
      [results]="chartData"
      [gradient]="gradient"
      [xAxis]="showXAxis"
      [yAxis]="showYAxis"
      [legend]="showLegend"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="showYAxisLabel"
      [xAxisLabel]="xAxisLabel"
      [yAxisLabel]="yAxisLabel"
      [autoScale]="autoScale"
      [animations]="false"
      [timeline]="true"
      (select)="onSelect($event)"
    >
    </ngx-charts-line-chart>
  </div>
</div>
